Cartesius How To:

1. Generate and Register Key

	- On your local machine, execute the command: ssh-keygen
	- This will make a key in /home/username/.ssh (Linux), or in C:/Users/username/.ssh (Windows)
	- Open the file id_rsa.pub, copy the content 
	- Go to portal.surfsara.nl, login, then select "Public ssh keys" and add the key you have generated

2. Setup a VPN connection

	- I use this VPN: https://wiki.cncz.science.ru.nl/Vpn	

3. Running a Jupyter Notebook

	- Make sure your VPN is connected and your key is registered
	- Open your terminal (I use Powershell)
	- Login to Cartesius using the following command: ssh ccurs003@cartesius.surfsara.nl
		- If it is the first time you login, run the following commands:
			ssh-keygen 
			touch ~/.ssh/authorized_keys 
			cat ~/.ssh/id_rsa.pub > ~/.ssh/authorized_keys	
	- To start a job, execute the command: sbatch job_test
	- You can use the command squeue -u ccurs003 to check if it is running (ST: R means it's running)
	- In a new terminal, run the command ssh -L 5850:localhost:5850 ccurs003@vis.cartesius.surfsara.nl
	- In your browser go to http://localhost:5850/
	- If you get asked for a password/token, you can find it in the slurm file with the corresponding JOBID
		- Use ls to see the files and nano slurm-JOBID.out to open it
		- You will see the following line somewhere at the bottom:
		- The Jupyter Notebook is running at: http://localhost:5850/?token=52af886bcc9ec7030271098c8a800f48bd7dc2106b039060
		- Copy the token that is in the file	
	- Finished! Run a notebook! 
	
4. When You Are Done

	- When you are done, stop your job by using the command scancel JOBID
	- Otherwise, the job stops after 1 hour 

5. Other

	- Make sure to use model.cuda() to make sure your model uses the GPU etc.
	- If you want to install additional libraries, add pip install LIBRARY --user to the job_test file
	- If you want to use another port from the range, you can change it in this file as well


